<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Student Performance Tracking</title>

  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500&display=swap" rel="stylesheet" />
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet" />
  <link href="https://fonts.googleapis.com/css2?family=Poppins&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css" />

  <style>
    /* Global Variables */
    :root {
      --primary: #4f378a;
      --secondary: #eaddff;
      --container-active: #d0c3f7;
    }

    /* Base HTML/Body Styles (Desktop-first approach) */
    html, body {
      height: 100%;
      margin: 0;
      font-family: "Roboto", sans-serif;
      background: #fff;
      display: flex;
      flex-direction: column;
      align-items: center; /* Center horizontally by default */
      justify-content: center; /* Center vertically by default - changed from flex-start to center */
      background-image: url('https://upload.wikimedia.org/wikipedia/commons/d/d8/NHCE_Campus.jpg');
      background-size: cover;
      background-position: center;
      background-repeat: no-repeat;
      background-attachment: fixed;
    }

    /* Ensure images scale responsively */
    img {
        max-width: 100%;
        height: auto; /* Maintain aspect ratio */
    }

    h5 { font-weight: 500; letter-spacing: .4px; }
    p.subtitle { margin: .2rem 0 2.5rem; color:#555; }

    .genericavatar {
      background-color: #eaddff;
      height: 150px;
      width: 150px;
      border-radius: 40%;
      margin: 0 auto 1.5rem;
      display: flex;
      align-items: center;
      justify-content: center;
      box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
      overflow: hidden;
    }

    .inneravatar {
      position: relative;
      height: 100px;
      width: 100px;
      transform: rotate(-90deg);
    }

    .circle {
      position: absolute;
      width: 50px;
      height: 50px;
      background-color: #4f378a;
      border-radius: 50%;
      top: 25px;
    }
    .circle2 {
      position: absolute;
      width: 180px;
      height: 50px;
      background-color: #4f378a;
      border-radius: 50%;
      top: 25px;
    }

    .circle-left {
      left: -150px;
      bottom: 15px;
      width: 90px;
      height: 100px;
      background-color: #6c4ba3;
      border-radius: 50%;
      transform: translateX(100px)translateY(-23.5px);
    }

    .circle-right {
      right: 0;
      background-color: #6c4ba3;
    }

    .state-layer {
      height: 32px;
      width: 83px;
      padding: 6px 12px;
      display: flex;
      flex-direction: row;
      justify-content: center;
      align-items: center;
      position: relative;
      background-color: #ece6f9;
      border-radius: 4px;
      border: none;
      cursor: pointer;
      font-family: Arial, sans-serif;
      font-size: 14px;
      color: #4f378a;
      transition: background-color 0.2s ease;
    }

    .state-layer:hover {
      background-color: #d5c4f1;
    }
    .poppins-title {
      font-family: 'Poppins', sans-serif;
      font-weight: bold;
    }

    .login-card {
      max-width: 420px;
      width: 100%;
      padding: 2rem 2.5rem 3rem;
      border-radius: 1rem;
      /* Remove fixed positioning for desktop, use flexbox/margin for centering */
      /* right: -450px; */ /* Removed */
      /* bottom: -50px; */ /* Removed */
      /* position: relative; */ /* Removed for default flow */
      background-color: rgba(255, 255, 255, 0.92);
      padding: 20px;
      border-radius: 10px;
      box-shadow: 0 8px 20px rgba(0, 0, 0, 0.2);
    }

    .login-card .input-field input:focus + label {
      color: var(--primary) !important;
    }

    .login-card .input-field input:focus {
      border-bottom: 1px solid var(--primary) !important;
      box-shadow: 0 1px 0 0 var(--primary) !important;
    }

    .segmentedbutton {
      position: relative;
      height: 48px;
      width: 100%;
      max-width: 275px;
      margin: 0 auto 1.5rem;
      border: 2px solid #000;
      border-radius: 100px;
      background: #fff;
      display: flex;
    }

    .segment-start, .segment-end {
      flex: 1;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      position: relative;
    }

    .container, .container2 {
      height: 100%;
      width: 100%;
      border-radius: 100px;
      transition: background 0.2s;
      display: flex;
      align-items: center;
      justify-content: center;
      position: relative;
    }

    .container.active, .container2.active {
      background: var(--container-active);
    }

    .selectedicon {
      height: 18px;
      width: 18px;
      margin-left: 6px;
      opacity: 0;
      transition: opacity 0.2s;
    }

    .active .selectedicon {
      opacity: 1;
    }
    .top-left-logo {
        position: absolute; /* Keep absolute for desktop */
        top: 10px;
        left: 30px;
        height: 160px;
        z-index: 1000;
    }

    .label-text, .label-text2 {
      font-size: 14px;
      font-family: Roboto, sans-serif;
      color: #1d1b20;
      display: flex;
      align-items: center;
    }

    .input-field .material-icons.prefix {
      color: #4f378a;
    }

    .toggle-pw {
      cursor: pointer;
    }
    .loader {
      position: absolute;
      top: 50%;
      left: 50%;
      width: 50px;
      height: 50px;
      margin: -25px 0 0 -25px;
      border: 4px solid #ddd;
      border-top: 4px solid #6c4ba3;
      border-radius: 50%;
      animation: spin 1s linear infinite;
      z-index: 1000;
    }

    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }

    .loading-overlay {
      position: fixed;
      top: 0; left: 0;
      width: 100vw;
      height: 100vh;
      background-color: rgba(255, 255, 255, 0.5);
      backdrop-filter: blur(2px);
      z-index: 999;
    }

    /* ********************************************* */
    /* Media Queries for Smaller Screens (Mobile & Tablet Adjustments) */
    /* ********************************************* */

    @media (max-width: 992px) { /* Adjust for tablets and smaller (Materialize default breakpoint) */
        html, body {
            /* On smaller screens, allow content to flow naturally and center it */
            justify-content: flex-start; /* Reset vertical alignment for scrollable content */
            padding: 20px; /* Add some padding around the edges */
        }

        .login-card {
            /* Remove fixed desktop positioning for mobile */
            position: static; /* Let it flow naturally */
            right: auto;
            bottom: auto;
            transform: none; /* Ensure no transforms interfering */
            margin: 20px auto; /* Center horizontally with auto margins */
            max-width: 90%; /* Allow it to take more width on smaller screens */
            padding: 1.5rem; /* Adjust padding if desired */
        }

        .top-left-logo {
            position: static; /* Remove absolute positioning on mobile */
            margin: 10px auto; /* Center it horizontally */
            display: block; /* Make it a block element to take its own line */
            width: 120px; /* Adjust size for mobile */
            height: auto;
            left: auto;
            top: auto;
            text-align: center; /* If it contains text, center it */
        }

        /* Adjustments for the avatar and circles might be needed for very small screens
           if their fixed sizes cause overflow or look too big/small */
        .genericavatar {
            height: 120px; /* Smaller avatar on mobile */
            width: 120px;
            margin-bottom: 1rem;
        }
        .inneravatar {
            height: 80px;
            width: 80px;
        }
        .circle {
            width: 40px;
            height: 40px;
            top: 20px;
        }
        .circle2 {
            width: 140px;
            height: 40px;
            top: 20px;
        }
        .circle-left {
            left: -120px;
            width: 70px;
            height: 80px;
            transform: translateX(85px) translateY(-19px);
        }
    }

    @media (max-width: 600px) { /* Further adjustments for smaller phones */
        html, body {
            padding: 10px; /* Even less padding */
        }
        .login-card {
            padding: 1rem; /* Smaller internal padding */
            border-radius: 0; /* Optional: remove rounded corners on very small screens */
            box-shadow: none; /* Optional: remove shadow */
        }
        h5 {
            font-size: 1.3rem; /* Adjust title size */
        }
        p.subtitle {
            font-size: 0.9rem; /* Adjust subtitle size */
            margin-bottom: 1.5rem;
        }
    }
  </style>
</head>
<body>
  
  
<img src="https://www.apps-newhorizonindia.in/institution/misc/nhce.png" alt="NHCE Logo" class="top-left-logo" />

  <div class="login-card z-depth-1">
<div id="loadingOverlay" class="loading-overlay" style="display: none;">
  <div class="loader"></div>
</div>

  <h6 class="center-align poppins-title">Student Performance Tracking</h6><br><br>
<div class="genericavatar">
  <div class="inneravatar">
    <div class="circle2 circle-left"></div>
    <div class="circle circle-right"></div>
  </div>
</div>



    <!-- Segmented Button -->
    <div id="segmentedbutton" class="segmentedbutton">
      <!-- Faculty -->
      <div data-role="faculty" id="segment-start" class="segment-start">
        <div id="container" class="container active">
          <span class="label-text">Faculty</span>
          <img id="selectedicon" class="selectedicon" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABMAAAASCAYAAAC5DOVpAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAC/SURBVHgB7dIhDsIwFIDh994mYGpHWILlEAUmBmqKVI4TcAS4AUcgKBLUHIKQ7QgTSBLCDaaGgRSG2koTWiCo/artS748UYCmvxX4nMlvBB808vmMAJPhYBx+hZUQAM4Fwmq738TVGYJBNWi3juR5DQsY98iiRXErJmka5yZQGUk3BihCx24njIWuCfSy2XO7Po+IcPk4ZsX10nPs1lQHUmJVEAFzAcLVgcos1ePxdMg6XveMCFwXepvqYzb9tjvHg0ZvV5YLFwAAAABJRU5ErkJggg==" />
        </div>
      </div>

      <!-- Student -->
      <div data-role="student" id="segment-end" class="segment-end">
        <div id="container2" class="container2">
          <span class="label-text2">Student</span>
          <img id="selectedicon2" class="selectedicon" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABMAAAASCAYAAAC5DOVpAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAC/SURBVHgB7dIhDsIwFIDh994mYGpHWILlEAUmBmqKVI4TcAS4AUcgKBLUHIKQ7QgTSBLCDaaGgRSG2koTWiCo/artS748UYCmvxX4nMlvBB808vmMAJPhYBx+hZUQAM4Fwmq738TVGYJBNWi3juR5DQsY98iiRXErJmka5yZQGUk3BihCx24njIWuCfSy2XO7Po+IcPk4ZsX10nPs1lQHUmJVEAFzAcLVgcos1ePxdMg6XveMCFwXepvqYzb9tjvHg0ZvV5YLFwAAAABJRU5ErkJggg==" />
        </div>
      </div>
    </div>
  
<div id="loginFields">
<form name="loginForm" id="loginForm" action="LoginServlet" method="post">
<input type="hidden" id="loginRoleInput" name="role" value="faculty" />

  <!-- LOGIN FIELDS -->
  
    <div class="input-field">
      <i class="material-icons prefix">person</i>
      <input id="username" name="username" type="text" class="validate" required />
      <label for="username">Username</label>
    </div>

    <div class="input-field" style="position:relative;">
      <i class="material-icons prefix">lock</i>
      <input id="password" name="password" type="password" class="validate" required />
      <label for="password">Password</label>
      <i class="material-icons toggle-pw" id="togglePw" style="position:absolute; right:0; top:0.8rem;">visibility_off</i>
    </div>

    <center>
      <button class="state-layer" id="loginBtn" type="submit">
        <span id="formButtonLabel" class="label">>&nbsp;&nbsp;Login</span>
      </button><br><br>
      <h6>Have not registered yet?<a href="#" onclick="switchToRegister()"><u>&nbsp;Register</u></a></h6>
    </center>
</form>
  </div>
<!-- REGISTER FORM -->
<form name="registerForm" id="registerForm" action="RegisterServlet" method="post" style="display: none;">
<input type="hidden" id="registerRoleInput" name="role" value="faculty" />
  <fieldset style="min-height: 100px; width: 300px; margin: 0 auto;">
    <legend>Registration Form</legend>
    <table cellspacing="0" cellpadding="10" border="1">
      <tr>
        <td><label for="regUsername">USERNAME:</label></td>
        <td><input class="control" type="text" id="regUsername" name="regUsername"></td>
      </tr>
      <tr>
        <td><label for="regEmail">EMAIL:</label></td>
        <td><input class="control" type="email" id="regEmail" name="email" placeholder="EMAIL"></td>
      </tr>
      <tr>
        <td><label for="regPassword">PASSWORD:</label></td>
        <td><input class="control" type="password" id="regPassword" name="regPassword"></td>
      </tr>
      <tr>
        <td><label for="confirmPassword">CONFIRM PASSWORD:</label></td>
        <td><input class="control" type="password" id="confirmPassword" name="confirmPassword" placeholder="CONFIRM PASSWORD"></td>
      </tr>
      <tr>
        <td colspan="2" style="text-align: center;">
          <button id="registerBtn" type="submit">REGISTER</button>
          <button type="reset">CLEAR</button>
        </td>
      </tr>
    </table>
    <center><a href="#" onclick="switchToLogin()">Back to Login</a></center>
  </fieldset>
</form>


  <!-- Materialize JS -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>
  <script>

  document.addEventListener('DOMContentLoaded', () => {
    const pwField = document.getElementById('password');
    const toggle = document.getElementById('togglePw');
    toggle.addEventListener('click', () => {
      const showing = pwField.type === 'text';
      pwField.type = showing ? 'password' : 'text';
      toggle.textContent = showing ? 'visibility_off' : 'visibility';
    });
  });
    const facultySegment = document.querySelector('[data-role="faculty"]');
    const studentSegment = document.querySelector('[data-role="student"]');
    const loginRoleInput = document.getElementById('loginRoleInput');
    const registerRoleInput = document.getElementById('registerRoleInput');

    function setRole(role) {
      document.getElementById('container').classList.toggle('active', role === 'faculty');
      document.getElementById('container2').classList.toggle('active', role === 'student');
      if (loginRoleInput) loginRoleInput.value = role;
      if (registerRoleInput) registerRoleInput.value = role;
    }

    facultySegment.addEventListener('click', () => setRole('faculty'));
    studentSegment.addEventListener('click', () => setRole('student'));

    const p = new URLSearchParams(window.location.search);
    if (p.get("login") === "fail")  alert("Invalid credentials");
    if (p.get("reg")   === "success") alert("Registration successful!");

    
  function switchToRegister() {
    document.getElementById('loginForm').style.display = 'none';
    document.getElementById('registerForm').style.display = 'block';
  }

  function switchToLogin() {
    document.getElementById('registerForm').style.display = 'none';
    document.getElementById('loginForm').style.display = 'block';
  }
  
  function showTemporaryLoader() {
    const overlay = document.getElementById("loadingOverlay");
    overlay.style.display = "flex";

    setTimeout(() => {
      overlay.style.display = "none";
    }, 1200); // 1.2 seconds
  }

  window.addEventListener('DOMContentLoaded', () => {
    const loginBtn = document.getElementById("loginBtn");
    const registerBtn = document.getElementById("registerBtn");

    if (loginBtn) {
      loginBtn.addEventListener("click", showTemporaryLoader);
    }

    if (registerBtn) {
      registerBtn.addEventListener("click", showTemporaryLoader);
    }
  });



 </script>
</body>
</html>
